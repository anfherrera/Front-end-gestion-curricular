<app-card-container title="Solicitud de Cursos Intersemestrales de Verano">
  <div *ngIf="loading">Cargando...</div>

  <!-- Formulario para solicitar curso nuevo -->
  <form *ngIf="!loading" [formGroup]="solicitudForm" (ngSubmit)="onSubmitSolicitud()" class="solicitud-form">
    
    <!-- Nombre Completo -->
    <mat-form-field appearance="outline" class="full-width">
      <mat-label>Nombre Completo</mat-label>
      <input matInput formControlName="nombreCompleto" placeholder="Ingresa tu nombre completo">
      <mat-icon matSuffix>person</mat-icon>
      <mat-error *ngIf="solicitudForm.get('nombreCompleto')?.hasError('required')">
        El nombre completo es requerido
      </mat-error>
    </mat-form-field>

    <!-- Código del Estudiante -->
    <mat-form-field appearance="outline" class="full-width">
      <mat-label>Código</mat-label>
      <input matInput formControlName="codigo" placeholder="Ingresa tu código de estudiante">
      <mat-icon matSuffix>badge</mat-icon>
      <mat-error *ngIf="solicitudForm.get('codigo')?.hasError('required')">
        El código es requerido
      </mat-error>
    </mat-form-field>

    <!-- Curso Solicitado -->
    <mat-form-field appearance="outline" class="full-width">
      <mat-label>Curso</mat-label>
      <mat-select formControlName="curso" placeholder="Selecciona el curso que deseas solicitar">
        <mat-option *ngFor="let curso of cursosDisponibles" [value]="curso.nombre_curso">
          {{ curso.nombre_curso }} ({{ curso.codigo_curso }}) - {{ curso.creditos }} créditos
        </mat-option>
      </mat-select>
      <mat-icon matSuffix>school</mat-icon>
      <mat-error *ngIf="solicitudForm.get('curso')?.hasError('required')">
        Debes seleccionar un curso
      </mat-error>
    </mat-form-field>

    <!-- Condición -->
    <mat-form-field appearance="outline" class="full-width">
      <mat-label>Condición</mat-label>
      <mat-select formControlName="condicion" placeholder="Selecciona la condición de tu solicitud">
        <mat-option *ngFor="let condicion of condiciones" [value]="condicion">
          {{ getCondicionDisplayName(condicion) }}
        </mat-option>
      </mat-select>
      <mat-icon matSuffix>assignment</mat-icon>
      <mat-error *ngIf="solicitudForm.get('condicion')?.hasError('required')">
        Debes seleccionar una condición
      </mat-error>
    </mat-form-field>

    <!-- Botones -->
    <div class="form-actions">
      <button type="button" mat-stroked-button color="warn" (click)="onClearForm()" class="action-button">
        <mat-icon>clear</mat-icon>
        Limpiar
      </button>
      
      <button type="submit" mat-raised-button color="primary" 
              [disabled]="solicitudForm.invalid || loading" class="action-button">
        <mat-icon>send</mat-icon>
        Enviar Solicitud
      </button>
    </div>
  </form>

  <!-- Mensaje de éxito -->
  <div *ngIf="solicitudEnviada" class="success-message">
    <mat-icon class="success-icon">check_circle</mat-icon>
    <p>¡Solicitud enviada exitosamente!</p>
    <p>Tu solicitud ha sido registrada y será revisada por el equipo académico.</p>
  </div>
</app-card-container>
