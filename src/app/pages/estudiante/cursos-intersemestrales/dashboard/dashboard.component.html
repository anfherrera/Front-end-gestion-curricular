<div class="dashboard-container">
  <!-- Header con saludo -->
  <div class="welcome-header">
    <h1>¡Bienvenido, {{ usuario?.nombre }}!</h1>
    <p>Gestiona tus cursos intersemestrales de verano</p>
  </div>

  <!-- Estadísticas principales -->
  <div class="stats-grid">
    <mat-card class="stat-card">
      <mat-card-content>
        <div class="stat-content">
          <mat-icon class="stat-icon">assignment</mat-icon>
          <div class="stat-info">
            <h3>{{ totalSolicitudes }}</h3>
            <p>Total Solicitudes</p>
          </div>
        </div>
      </mat-card-content>
    </mat-card>

    <mat-card class="stat-card">
      <mat-card-content>
        <div class="stat-content">
          <mat-icon class="stat-icon">schedule</mat-icon>
          <div class="stat-info">
            <h3>{{ solicitudesPendientes }}</h3>
            <p>Pendientes</p>
          </div>
        </div>
      </mat-card-content>
    </mat-card>

    <mat-card class="stat-card">
      <mat-card-content>
        <div class="stat-content">
          <mat-icon class="stat-icon">check_circle</mat-icon>
          <div class="stat-info">
            <h3>{{ solicitudesAprobadas }}</h3>
            <p>Aprobadas</p>
          </div>
        </div>
      </mat-card-content>
    </mat-card>

    <mat-card class="stat-card">
      <mat-card-content>
        <div class="stat-content">
          <mat-icon class="stat-icon">school</mat-icon>
          <div class="stat-info">
            <h3>{{ cursosDisponiblesCount }}</h3>
            <p>Cursos Disponibles</p>
          </div>
        </div>
      </mat-card-content>
    </mat-card>
  </div>

  <!-- Progreso de inscripción -->
  <mat-card class="progress-card">
    <mat-card-header>
      <mat-card-title>Progreso de Inscripción</mat-card-title>
    </mat-card-header>
    <mat-card-content>
      <div class="progress-info">
        <span>{{ solicitudesAprobadas }} de {{ totalSolicitudes }} solicitudes aprobadas</span>
        <span>{{ getProgresoInscripcion() | number:'1.0-0' }}%</span>
      </div>
      <mat-progress-bar 
        mode="determinate" 
        [value]="getProgresoInscripcion()"
        class="progress-bar">
      </mat-progress-bar>
    </mat-card-content>
  </mat-card>

  <div class="content-grid">
    <!-- Solicitudes recientes -->
    <mat-card class="content-card">
      <mat-card-header>
        <mat-card-title>
          <mat-icon>list_alt</mat-icon>
          Mis Solicitudes Recientes
        </mat-card-title>
        <mat-card-subtitle>Últimas 5 solicitudes</mat-card-subtitle>
      </mat-card-header>
      <mat-card-content>
        <div class="solicitudes-list" *ngIf="solicitudes.length > 0; else noSolicitudes">
          <div *ngFor="let solicitud of solicitudes.slice(0, 5)" class="solicitud-item">
            <div class="solicitud-info">
              <h4>{{ solicitud.nombre_solicitud }}</h4>
              <p>{{ solicitud.objCursoOfertadoVerano.nombre_curso }}</p>
              <small>{{ formatearFecha(solicitud.fecha_solicitud) }}</small>
            </div>
            <div class="solicitud-status">
              <mat-chip 
                [style.background-color]="getEstadoColor(solicitud.estado)"
                [style.color]="'white'">
                {{ solicitud.estado }}
              </mat-chip>
              <mat-chip 
                [style.background-color]="getTipoSolicitudColor(solicitud.tipoSolicitud)"
                [style.color]="'white'">
                {{ solicitud.tipoSolicitud }}
              </mat-chip>
            </div>
          </div>
        </div>
        <ng-template #noSolicitudes>
          <div class="empty-state">
            <mat-icon>inbox</mat-icon>
            <p>No tienes solicitudes aún</p>
            <button mat-raised-button color="primary" routerLink="../cursos-ofertados">
              Ver Cursos Disponibles
            </button>
          </div>
        </ng-template>
      </mat-card-content>
      <mat-card-actions>
        <button mat-button routerLink="../ver-solicitud">Ver Todas</button>
      </mat-card-actions>
    </mat-card>

    <!-- Notificaciones -->
    <mat-card class="content-card">
      <mat-card-header>
        <mat-card-title>
          <mat-icon>notifications</mat-icon>
          Notificaciones
          <span *ngIf="notificacionesNoLeidas > 0" class="badge">{{ notificacionesNoLeidas }}</span>
        </mat-card-title>
        <mat-card-subtitle>Últimas notificaciones</mat-card-subtitle>
      </mat-card-header>
      <mat-card-content>
        <div class="notificaciones-list" *ngIf="notificaciones.length > 0; else noNotificaciones">
          <div *ngFor="let notificacion of notificaciones" 
               class="notificacion-item"
               [class.no-leida]="!notificacion.leida"
               (click)="marcarNotificacionLeida(notificacion)">
            <div class="notificacion-icon">
              <mat-icon [style.color]="getColorTipo(notificacion.tipoNotificacion)">
                {{ getIconoTipo(notificacion.tipoNotificacion) }}
              </mat-icon>
            </div>
            <div class="notificacion-content">
              <h5>{{ notificacion.titulo }}</h5>
              <p>{{ notificacion.mensaje }}</p>
              <small>{{ formatearFecha(notificacion.fechaCreacion) }}</small>
            </div>
            <div class="notificacion-urgente" *ngIf="notificacion.esUrgente">
              <mat-icon color="warn">priority_high</mat-icon>
            </div>
          </div>
        </div>
        <ng-template #noNotificaciones>
          <div class="empty-state">
            <mat-icon>notifications_none</mat-icon>
            <p>No tienes notificaciones</p>
          </div>
        </ng-template>
      </mat-card-content>
    </mat-card>
  </div>

  <!-- Acciones rápidas -->
  <mat-card class="actions-card">
    <mat-card-header>
      <mat-card-title>
        <mat-icon>flash_on</mat-icon>
        Acciones Rápidas
      </mat-card-title>
    </mat-card-header>
    <mat-card-content>
      <div class="actions-grid">
        <button mat-raised-button color="primary" routerLink="../cursos-ofertados">
          <mat-icon>school</mat-icon>
          Ver Cursos Disponibles
        </button>
        <button mat-raised-button color="accent" routerLink="../cursos-preinscripcion">
          <mat-icon>playlist_add</mat-icon>
          Preinscribirse
        </button>
        <button mat-raised-button routerLink="../inscripciones">
          <mat-icon>how_to_reg</mat-icon>
          Mis Inscripciones
        </button>
        <button mat-raised-button routerLink="../ver-solicitud">
          <mat-icon>list_alt</mat-icon>
          Seguimiento
        </button>
      </div>
    </mat-card-content>
  </mat-card>
</div>
