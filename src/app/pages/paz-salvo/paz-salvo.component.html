<div class="paz-salvo-container">

  <!-- 1. Documentación requerida -->
  <div class="section required-docs">
    <h3>Documentación requerida</h3>
    <ul>
      <li *ngFor="let doc of requiredDocuments" [ngClass]="{'uploaded': isDocumentUploaded(doc), 'missing': !isDocumentUploaded(doc)}">
        {{ doc }}
        <mat-icon>{{ isDocumentUploaded(doc) ? 'check_circle' : 'error' }}</mat-icon>
      </li>
    </ul>
  </div>

  <!-- 2. Adjuntar documentación requerida -->
  <div class="section upload-container">
    <h3>Adjuntar documentación requerida</h3>

    <label class="upload-btn" for="fileUpload">
      <mat-icon>upload</mat-icon>
      Subir archivo PDF
    </label>
    <input type="file" id="fileUpload" accept=".pdf" (change)="onFileSelected($event)" multiple>

   <table class="uploaded-files-table" *ngIf="uploadedFiles.length > 0">
  <thead>
    <tr>
      <th>Nombre del archivo</th>
      <th>Fecha de carga</th>
      <th>Validación</th>
      <th>Acción</th>
    </tr>
  </thead>
  <tbody>
    <tr *ngFor="let file of uploadedFiles; let i = index">
      <td>{{ file.name }}</td>
      <td>{{ file.date | date:'dd/MM/yyyy' }}</td>
      <td>
        <mat-icon class="validation-icon" [ngClass]="isFileRequired(file.name) ? 'valid' : 'invalid'">
          {{ isFileRequired(file.name) ? 'check_circle' : 'error' }}
        </mat-icon>
      </td>
      <td>
        <button mat-icon-button class="delete-icon-btn" (click)="removeFile(i)">
          <mat-icon>delete</mat-icon>
        </button>
      </td>
    </tr>
  </tbody>
</table>


    <button class="submit-btn" [disabled]="!canSubmit()" (click)="submitRequest()">Enviar solicitud</button>
  </div>

  <!-- 3. Seguimiento de solicitud -->
  <div class="section requests-list">
    <h3>Seguimiento de solicitud</h3>
    <div *ngFor="let req of requests" class="request-item">
      <span><strong>Nombre solicitud:</strong> {{ req.name }}</span>
      <span><strong>Fecha:</strong> {{ req.date | date:'dd/MM/yyyy' }}</span>
      <span><strong>Estado:</strong> {{ req.status }}</span>
    </div>
    <div *ngIf="requests.length === 0">No hay solicitudes realizadas aún.</div>
  </div>

</div>
