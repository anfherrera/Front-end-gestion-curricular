<div class="coordinador-container">

  <!-- Contenedor de solicitudes pendientes -->
  <mat-card class="card-section">
    <mat-card-title>Solicitudes Pendientes</mat-card-title>
    <mat-card-content>
      <table mat-table [dataSource]="solicitudes" *ngIf="solicitudes.length > 0">

        <!-- Solicitante -->
        <ng-container matColumnDef="solicitante">
          <th mat-header-cell *matHeaderCellDef>Solicitante</th>
          <td mat-cell *matCellDef="let solicitud">{{ solicitud.solicitante?.nombre }}</td>
        </ng-container>

        <!-- Fecha -->
        <ng-container matColumnDef="fecha">
          <th mat-header-cell *matHeaderCellDef>Fecha</th>
          <td mat-cell *matCellDef="let solicitud">{{ solicitud.fecha | date:'shortDate' }}</td>
        </ng-container>

        <!-- Seleccionar -->
        <ng-container matColumnDef="accion">
          <th mat-header-cell *matHeaderCellDef>Seleccionar</th>
          <td mat-cell *matCellDef="let solicitud">
            <button mat-icon-button color="primary" 
                    (click)="seleccionarSolicitud(solicitud)" 
                    [disabled]="selectedSolicitud?.id === solicitud.id">
              <mat-icon>check_circle</mat-icon>
            </button>
          </td>
        </ng-container>

        <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
        <tr mat-row *matRowDef="let row; columns: displayedColumns;"></tr>
      </table>

      <p *ngIf="solicitudes.length === 0" class="mensaje-vacio">
        No hay solicitudes pendientes
      </p>
    </mat-card-content>
  </mat-card>

  <!-- Documentación de la solicitud seleccionada -->
  <mat-card class="card-section" *ngIf="selectedSolicitud">
    <mat-card-title>Documentación Adjunta</mat-card-title>
    <mat-card-content>
      <app-archivo-list
        [archivos]="archivosDelEstudiante"
        [modo]="'coordinador'"
        (ver)="verArchivo($event)"
        (aprobar)="aprobarArchivo($event)"
        (rechazar)="rechazarArchivo($event)">
      </app-archivo-list>

      <p *ngIf="archivosDelEstudiante.length === 0" class="mensaje-vacio">
        No hay archivos cargados en esta solicitud.
      </p>
    </mat-card-content>
  </mat-card>

  <!-- Botones de acción para la solicitud completa -->
  <div class="botones-acciones" *ngIf="selectedSolicitud">
    <button mat-raised-button color="primary" (click)="aprobarSolicitud()">Aprobar Solicitud</button>
    <button mat-raised-button color="warn" (click)="rechazarSolicitud()">Rechazar Solicitud</button>
  </div>
</div>
