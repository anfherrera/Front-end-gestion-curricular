<div class="container-admin">
  <div class="header-section">
    <h2>
      <mat-icon>{{ isEditMode ? 'edit' : 'add' }}</mat-icon>
      {{ isEditMode ? 'Editar' : 'Nuevo' }} Programa
    </h2>
    <button mat-stroked-button (click)="cancelar()">
      <mat-icon>arrow_back</mat-icon>
      Volver
    </button>
  </div>

  <mat-card class="form-card">
    <mat-card-content>
      <form [formGroup]="programaForm" (ngSubmit)="guardar()">
        <div class="form-grid">
          <!-- Código del Programa -->
          <mat-form-field appearance="outline" class="full-width">
            <mat-label>Código del Programa</mat-label>
            <input 
              matInput 
              formControlName="codigo"
              placeholder="Ej: ISIST"
              [disabled]="loading"
            >
            <mat-icon matPrefix>tag</mat-icon>
            <mat-error *ngIf="codigo?.hasError('required')">
              El código es obligatorio
            </mat-error>
            <mat-error *ngIf="codigo?.hasError('minlength')">
              El código debe tener al menos 2 caracteres
            </mat-error>
            <mat-error *ngIf="codigo?.hasError('maxlength')">
              El código no puede exceder 10 caracteres
            </mat-error>
          </mat-form-field>

          <!-- Nombre del Programa -->
          <mat-form-field appearance="outline" class="full-width">
            <mat-label>Nombre del Programa</mat-label>
            <input 
              matInput 
              formControlName="nombre_programa"
              placeholder="Ej: Ingeniería de Sistemas"
              [disabled]="loading"
            >
            <mat-icon matPrefix>assignment</mat-icon>
            <mat-error *ngIf="nombrePrograma?.hasError('required')">
              El nombre es obligatorio
            </mat-error>
            <mat-error *ngIf="nombrePrograma?.hasError('minlength')">
              El nombre debe tener al menos 5 caracteres
            </mat-error>
            <mat-error *ngIf="nombrePrograma?.hasError('maxlength')">
              El nombre no puede exceder 150 caracteres
            </mat-error>
          </mat-form-field>
        </div>

        <!-- Botones -->
        <div class="form-actions">
          <button 
            mat-stroked-button 
            type="button"
            (click)="cancelar()"
            [disabled]="loading"
          >
            <mat-icon>cancel</mat-icon>
            Cancelar
          </button>
          <button 
            mat-raised-button 
            color="primary"
            type="submit"
            [disabled]="loading || programaForm.invalid"
          >
            <mat-spinner diameter="20" *ngIf="loading"></mat-spinner>
            <mat-icon *ngIf="!loading">save</mat-icon>
            {{ isEditMode ? 'Actualizar' : 'Guardar' }}
          </button>
        </div>
      </form>
    </mat-card-content>
  </mat-card>
</div>

