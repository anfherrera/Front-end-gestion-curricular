<div class="dashboard-container">
  <!-- Header con saludo -->
  <div class="welcome-header">
    <h1>¡Bienvenido{{ usuario?.nombre ? ', ' + usuario.nombre : '' }}!</h1>
    <p>Panel de gestión de cursos intersemestrales de verano</p>
  </div>

  <!-- Estadísticas principales -->
  <div class="stats-grid">
    <mat-card class="stat-card">
      <mat-card-content>
        <div class="stat-content">
          <mat-icon class="stat-icon">school</mat-icon>
          <div class="stat-info">
            <h3>{{ totalCursosActivos }}</h3>
            <p>Cursos Activos</p>
          </div>
        </div>
      </mat-card-content>
    </mat-card>

    <mat-card class="stat-card">
      <mat-card-content>
        <div class="stat-content">
          <mat-icon class="stat-icon">person_add</mat-icon>
          <div class="stat-info">
            <h3>{{ preinscripcionesPendientes }}</h3>
            <p>Preinscripciones</p>
          </div>
        </div>
      </mat-card-content>
    </mat-card>

    <mat-card class="stat-card">
      <mat-card-content>
        <div class="stat-content">
          <mat-icon class="stat-icon">how_to_reg</mat-icon>
          <div class="stat-info">
            <h3>{{ inscripcionesPendientes }}</h3>
            <p>Inscripciones</p>
          </div>
        </div>
      </mat-card-content>
    </mat-card>
  </div>

  <div class="content-grid">
    <!-- Cursos activos -->

    
    <mat-card class="content-card">
      <mat-card-header>
        <mat-card-title>
          <mat-icon>school</mat-icon>
          Cursos Activos
        </mat-card-title>
        <mat-card-subtitle>Gestión de cursos disponibles</mat-card-subtitle>
      </mat-card-header>
      <mat-card-content>
        <div class="cursos-list" *ngIf="cursosActivos.length > 0; else noCursos">
          <div *ngFor="let curso of cursosActivos; trackBy: trackByCursoId" class="curso-item">
            <div class="curso-info">
              <h4>{{ curso.nombre_curso || 'Sin nombre' }}</h4>
              <p>{{ obtenerNombreMateria(curso) }} - {{ obtenerNombreDocente(curso) }}</p>
              <small *ngIf="curso.fecha_inicio || curso.fecha_fin; else sinFechas">
                {{ formatearRangoFechas(curso.fecha_inicio, curso.fecha_fin) }}
              </small>
              <ng-template #sinFechas>
                <small class="text-muted">Fechas no definidas</small>
              </ng-template>
              <small *ngIf="obtenerPeriodo(curso) !== 'N/A'" class="periodo-info">
                • Período: {{ obtenerPeriodo(curso) }}
              </small>
              <small *ngIf="curso.grupo" class="grupo-info">
                • Grupo: {{ curso.grupo }}
              </small>
            </div>
            <div class="curso-status">
              <mat-chip 
                [style.background-color]="getEstadoColor(obtenerEstadoActual(curso))"
                [style.color]="'white'"
                [style.border]="'none'"
                [style.outline]="'none'"
                [style.--mdc-chip-label-text-color]="'white'"
                [style.--mdc-chip-container-color]="getEstadoColor(obtenerEstadoActual(curso))"
                [style.--mdc-chip-outline-color]="'transparent'"
                [style.--mdc-chip-outline-width]="'0'"
                class="custom-chip">
                <span [style.color]="'white'">{{ obtenerEstadoActual(curso) }}</span>
              </mat-chip>
              <div class="cupos-info">
                <small>{{ curso.cupo_disponible || curso.cupo_estimado || 0 }} / {{ curso.cupo_maximo || curso.cupo_estimado || 0 }} cupos</small>
              </div>
            </div>
          </div>
        </div>
        <ng-template #noCursos>
          <div class="empty-state">
            <mat-icon>school</mat-icon>
            <p>No hay cursos activos</p>
            <button mat-raised-button color="primary" routerLink="../gestionar">
              Crear Nuevo Curso
            </button>
          </div>
        </ng-template>
      </mat-card-content>
    </mat-card>
  </div>
</div>
