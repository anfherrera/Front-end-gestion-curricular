<div class="dashboard-container">
  <!-- Header con saludo -->
  <div class="welcome-header">
    <h1>¡Bienvenido{{ usuario?.nombre ? ', ' + usuario.nombre : '' }}!</h1>
    <p>Panel de gestión de cursos intersemestrales de verano</p>
  </div>

  <!-- Estadísticas principales -->
  <div class="stats-grid">
    <mat-card class="stat-card">
      <mat-card-content>
        <div class="stat-content">
          <mat-icon class="stat-icon">school</mat-icon>
          <div class="stat-info">
            <h3>{{ totalCursosActivos }}</h3>
            <p>Cursos Activos</p>
          </div>
        </div>
      </mat-card-content>
    </mat-card>

    <mat-card class="stat-card">
      <mat-card-content>
        <div class="stat-content">
          <mat-icon class="stat-icon">person_add</mat-icon>
          <div class="stat-info">
            <h3>{{ preinscripcionesPendientes }}</h3>
            <p>Preinscripciones</p>
          </div>
        </div>
      </mat-card-content>
    </mat-card>

    <mat-card class="stat-card">
      <mat-card-content>
        <div class="stat-content">
          <mat-icon class="stat-icon">how_to_reg</mat-icon>
          <div class="stat-info">
            <h3>{{ inscripcionesPendientes }}</h3>
            <p>Inscripciones</p>
          </div>
        </div>
      </mat-card-content>
    </mat-card>
  </div>

  <!-- Progreso de gestión -->
  <mat-card class="progress-card">
    <mat-card-header>
      <mat-card-title>Progreso de Gestión</mat-card-title>
    </mat-card-header>
    <mat-card-content>
      <div class="progress-info">
        <span>{{ totalCursosActivos - preinscripcionesPendientes - inscripcionesPendientes }} de {{ totalCursosActivos }} cursos gestionados</span>
        <span>{{ getProgresoGestion() | number:'1.0-0' }}%</span>
      </div>
      <mat-progress-bar 
        mode="determinate" 
        [value]="getProgresoGestion()"
        class="progress-bar">
      </mat-progress-bar>
    </mat-card-content>
  </mat-card>

  <div class="content-grid">
    <!-- Cursos activos -->
    <mat-card class="content-card">
      <mat-card-header>
        <mat-card-title>
          <mat-icon>school</mat-icon>
          Cursos Activos
        </mat-card-title>
        <mat-card-subtitle>Gestión de cursos disponibles</mat-card-subtitle>
      </mat-card-header>
      <mat-card-content>
        <div class="cursos-list" *ngIf="cursosActivos.length > 0; else noCursos">
          <div *ngFor="let curso of cursosActivos.slice(0, 5); trackBy: trackByCursoId" class="curso-item">
            <div class="curso-info">
              <h4>{{ curso.nombre_curso }}</h4>
              <p>{{ curso.objMateria.nombre }} - {{ obtenerNombreDocente(curso) }}</p>
              <small>{{ formatearFecha(curso.fecha_inicio) }} - {{ formatearFecha(curso.fecha_fin) }}</small>
            </div>
            <div class="curso-status">
              <mat-chip 
                [style.background-color]="getEstadoColor(curso.estado)"
                [style.color]="'white'"
                [style.border]="'none'"
                [style.outline]="'none'"
                [style.--mdc-chip-label-text-color]="'white'"
                [style.--mdc-chip-container-color]="getEstadoColor(curso.estado)"
                [style.--mdc-chip-outline-color]="'transparent'"
                [style.--mdc-chip-outline-width]="'0'"
                class="custom-chip">
                <span [style.color]="'white'">{{ curso.estado }}</span>
              </mat-chip>
              <div class="cupos-info">
                <small>{{ curso.cupo_disponible }} / {{ curso.cupo_maximo }} cupos</small>
              </div>
            </div>
          </div>
        </div>
        <ng-template #noCursos>
          <div class="empty-state">
            <mat-icon>school</mat-icon>
            <p>No hay cursos activos</p>
            <button mat-raised-button color="primary" routerLink="../ofertar">
              Crear Nuevo Curso
            </button>
          </div>
        </ng-template>
      </mat-card-content>
    </mat-card>
  </div>
</div>
